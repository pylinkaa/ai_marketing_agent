"""Prompt templates for different goals, channels, and styles."""

from typing import Dict

# Base templates by goal
GOAL_TEMPLATES: Dict[str, str] = {
    "активация": """Создай персонализированное маркетинговое сообщение для активации пользователя.
Цель: мотивировать пользователя совершить первую покупку или вернуться к активному использованию сервиса.
Сообщение должно быть мотивирующим и показывать ценность предложения.""",
    
    "реактивация": """Создай персонализированное маркетинговое сообщение для реактивации пользователя.
Цель: вернуть неактивного пользователя в сервис.
Сообщение должно напоминать о преимуществах сервиса и предлагать привлекательное предложение для возврата.""",
    
    "удержание": """Создай персонализированное маркетинговое сообщение для удержания пользователя.
Цель: укрепить лояльность активного пользователя и предотвратить отток.
Сообщение должно подчеркивать ценность долгосрочных отношений и предлагать эксклюзивные преимущества.""",
    
    "upsell": """Создай персонализированное маркетинговое сообщение для upsell.
Цель: предложить пользователю более дорогой товар или дополнительную услугу.
Сообщение должно демонстрировать дополнительную ценность и преимущества апгрейда.""",
    
    "промо": """Создай персонализированное маркетинговое сообщение для промо-кампании.
Цель: проинформировать о специальном предложении, скидке или акции.
Сообщение должно быть привлекательным и создавать ощущение срочности.""",
    
    "сервис": """Создай персонализированное сервисное сообщение для поддержки пользователя.
Цель: помочь пользователю решить проблему или ответить на вопрос.
Сообщение должно быть дружелюбным, полезным и показывать заботу о пользователе.""",
}

# Channel-specific instructions
CHANNEL_INSTRUCTIONS: Dict[str, str] = {
    "push": """Канал: Push-уведомление.
Требования: очень короткое сообщение, привлекающий заголовок, четкий призыв к действию.
Стиль: динамичный, энергичный.""",
    
    "email": """Канал: Email-рассылка.
Требования: структурированное сообщение с возможностью более подробного описания.
Стиль: информативный, но при этом привлекательный.""",
    
    "inapp": """Канал: In-app сообщение.
Требования: сообщение среднего размера, видимое внутри приложения.
Стиль: ненавязчивый, но заметный.""",
}

# Style modifiers
STYLE_MODIFIERS: Dict[str, str] = {
    "дружелюбный": "Тон: дружелюбный, теплый, личный. Используй неформальный язык, эмодзи (если уместно).",
    "формальный": "Тон: формальный, профессиональный. Используй официальный стиль общения.",
    "срочный": "Тон: срочный, создающий ощущение дедлайна. Используй слова, подчеркивающие ограниченность по времени.",
    "информативный": "Тон: информативный, нейтральный. Фокус на фактах и полезной информации.",
}


def get_template(goal: str, channel: str, style: str = "дружелюбный") -> str:
    """
    Get prompt template for goal, channel, and style combination.
    
    Args:
        goal: Campaign goal (активация, реактивация, etc.)
        channel: Communication channel (push, email, inapp)
        style: Message style (дружелюбный, формальный, etc.)
        
    Returns:
        Combined template string
    """
    goal_template = GOAL_TEMPLATES.get(goal, GOAL_TEMPLATES["активация"])
    channel_instruction = CHANNEL_INSTRUCTIONS.get(channel, CHANNEL_INSTRUCTIONS["push"])
    style_modifier = STYLE_MODIFIERS.get(style, STYLE_MODIFIERS["дружелюбный"])
    
    template = f"""{goal_template}

{channel_instruction}

{style_modifier}

Важно: сообщение должно быть на русском языке и соответствовать ограничениям длины для канала {channel}."""
    
    return template

